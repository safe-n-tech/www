{{ define "main" }}
<section class="relative w-full pt-20 max-md:pb-36 max-md:-mb-20 md:pb-2 md:perso-background">
	<img class="w-full h-full hero-bg-img object-cover " src="/svgs/page-hero-bonnes-pratiques-bg.svg" alt="">
	<div class="container text-center text-white py-6">
		{{ partial "breadcrumb" (dict "page" . ) }}
		<h1 class="text-h1 md:text-5xl mt-10">Glossaire</h1>
	</div>
</section>

<div class="container text-dark_gray mt-20">
	<h1 class="text-h1">Glossaire</h1>
	{{ range .Pages }}
	<div class="bg-white my-10 rounded-2xl drop-shadow-sm">
		<button class="w-full  px-6 py-5 h-full flex flex-row justify-between drop-down__item">
			<p class="text-h2 text-black text-left w-2/3">{{ .Title }}</p>
			<div class="self-center">
				<img src="/svgs/arrowBlue.png" class="w-5" />
			</div>
		</button>
		<div class="bg-white hidden px-6 pb-6 pt-2 rounded-2xl">
			<p class="text-label">{{ .Params.contenu }}</p>
		</div>
	</div>
	{{ end }}
</div>

<h2>Thème 1</h2>
<div class="checklist" data-theme="theme1">
  <label><input type="checkbox" class="check-item"> Tâche 1</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 2</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 3</label><br>
</div>

<h2>Thème 2</h2>
<div class="checklist" data-theme="theme2">
  <label><input type="checkbox" class="check-item"> Tâche 1</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 2</label><br>
</div>

<h2>Thème 3</h2>
<div class="checklist" data-theme="theme3">
  <label><input type="checkbox" class="check-item"> Tâche 1</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 2</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 3</label><br>
  <label><input type="checkbox" class="check-item"> Tâche 4</label><br>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const checklists = document.querySelectorAll('.checklist');

    // Fonction pour charger l'état des thèmes
    function loadState() {
      return JSON.parse(localStorage.getItem('themesState')) || {};
    }

    // Fonction pour sauvegarder l'état des thèmes
    function saveState(state) {
      localStorage.setItem('themesState', JSON.stringify(state));
    }

    // Charger l'état au démarrage
    const state = loadState();

    // Initialiser les checklists
    checklists.forEach(checklist => {
      const theme = checklist.getAttribute('data-theme');
      const items = checklist.querySelectorAll('.check-item');

      // Charger l'état des cases pour ce thème
      if (state[theme]) {
        state[theme].forEach((checked, index) => {
          if (items[index]) items[index].checked = checked;
        });
      }

      // Ajouter un événement de changement
      items.forEach((item, index) => {
        item.addEventListener('change', () => {
          if (!state[theme]) state[theme] = [];
          state[theme][index] = item.checked;
          saveState(state);
        });
      });
    });
  });
</script>

<script>
	const dropDownItems = document.querySelectorAll(".drop-down__item");

	dropDownItems.forEach((item) => {
		item.addEventListener("click", () => {
			item.nextElementSibling.classList.toggle("hidden");
			item.querySelector("img").classList.toggle("rotate-90");
		});
	});
</script>

{{ end }}
